### نقش: کشاورز


 ### به عنوان کشاورز، می‌خواهم جزئیات یک محصول جدید را ارسال کنم، تا بتواند برای خریداران بالقوه فهرست شود.



### معیارهای پذیرش: 



### سناریوی موفقیت ثبت:


- [ ] الف)  یک کشاورز وارد شده است، When فرم «افزودن محصول» را با پر کردن تمام فیلدهای اجباری (نام، دسته، مقدار (به واحد استاندارد)، قیمت واحد، موقعیت جغرافیایی) ارسال کند، Then سیستم پذیرش را تأیید کرده و وضعیت محصول را "در انتظار تأیید" (Pending Approval) علامت‌گذاری کند. توضیح تکمیلی: سیستم باید تأییدیه‌ای مبنی بر ثبت موفقیت‌آمیز محصول نمایش دهد.    


- [] ب) ساختاری از داده‌ها و دستورات بدون ماهیت فیزیکی  
- [ ] ج) محصولی که به‌صورت طبیعی فرسوده می‌شود  
- [ ] د) مجموعه‌ای از مدارها و اتصالات  


### سناریوی اعتبارسنجی ورودی اجباری:
[ ] Given کشاورز فرم را ارسال می‌کند، When هر فیلد اجباری (مثلاً قیمت واحد، که باید عددی مثبت باشد) را خالی بگذارد یا مقداری نامعتبر (مانند قیمت منفی) وارد کند، Then سیستم باید پیام خطای مشخصی در کنار فیلد مربوطه نمایش داده و از ارسال فرم جلوگیری کند.

### سناریوی نمایش در داشبورد:
[ ] Given یک محصول با موفقیت ثبت شد، When کشاورز داشبورد خود را بررسی کند، Then محصول جدید باید با وضعیت "در انتظار تأیید" در لیست محصولات ثبت‌شده وی نمایش داده شود.

### نقش: خریدار
داستان: به عنوان خریدار، می‌خواهم محصولات فهرست‌شده را بر اساس دسته، محدوده قیمت و موقعیت جغرافیایی فیلتر کنم، تا بتوانم به سرعت موارد مرتبط با بودجه یا موقعیت مکانی خود را بیابم.

### معیارهای پذیرش :

### سناریوی جستجوی ترکیبی:
[ ] Given خریدار در صفحه بازارگاه است و حداقل ۵۰ محصول "تأیید شده" موجود است، When دسته‌بندی خاصی (مانند "سبزیجات") را انتخاب کرده و حداکثر قیمت (مثلاً (P_{max} = 100,000) تومان) را تعیین کند، Then فقط محصولاتی نمایش داده شوند که (Category = \text{"سبزیجات"}) و (Price \le P_{max}) بوده و وضعیت آن‌ها "تأیید شده" باشد.

### سناریوی فیلتر موقعیت جغرافیایی:
[ ] Given صفحه نتایج جستجو باز است، When خریدار فیلتر موقعیت (مثلاً "استان تهران") را اعمال کند، Then لیست نمایش داده شده باید بلافاصله به‌روز شده و فقط محصولاتی نمایش داده شوند که (Location = \text{"استان تهران"}) باشد، در حالی که فیلترهای دیگر اعمال شده حفظ شوند.

### سناریوی حذف فیلتر:
[ ] Given ترکیبی از فیلترها (دسته، قیمت، موقعیت) اعمال شده و نتایج فیلتر شده نمایش داده شده‌اند، When خریدار یکی از فیلترها (مثلاً محدوده قیمت) را حذف کند، Then سیستم باید نتایج را بدون آن محدودیت مجدداً بازیابی کند و فیلترهای فعال دیگر را حفظ کند.

### نقش: مدیر سیستم
داستان: به عنوان مدیر سیستم، می‌خواهم لیست محصولات در انتظار را بررسی کرده و تأیید یا رد کنم، تا استانداردهای کیفی پلتفرم حفظ شود.

### معیارهای پذیرش:

### سناریوی تأیید محصول:
[ ] Given وضعیت یک محصول (مثلاً ID=123) "در انتظار تأیید" است، When مدیر سیستم جزئیات محصول 123 را مشاهده و روی دکمه "تأیید" کلیک کند، Then وضعیت محصول به "تأیید شده" (Approved) تغییر کرده و در جستجوی خریداران قابل مشاهده شود.

### سناریوی رد محصول با دلیل:
[ ] Given وضعیت یک محصول "در انتظار تأیید" است، When مدیر سیستم روی "رد" کلیک کند، Then سیستم باید درخواست یک متن توضیحی برای "دلیل رد شدن" (حداقل ۱۰ کاراکتر) را اجباری کرده و پس از ثبت، وضعیت به "رد شده" (Rejected) تغییر یابد.

### سناریوی اطلاع‌رسانی به کشاورز:
[ ] Given یک محصول با موفقیت "رد شده" است، When کشاورز مربوطه داشبورد خود را مشاهده کند، Then باید محصول را با وضعیت "رد شده" به همراه دلیل مشخصی که توسط مدیر وارد شده است، مشاهده کند.

### نقش: خریدار
داستان: به عنوان خریدار، می‌خواهم سبد خرید خود را مرور کرده و انتخاب نهایی را به یک سفارش رسمی ثبت کنم، تا بتوانم به مرحله پرداخت بروم و خرید را نهایی کنم.

### معیارهای پذیرش :

سناریوی ایجاد سفارش موفق:
[ ] Given خریدار اقلامی با موجودی کافی در سبد خرید (شامل محصولاتی از حداقل یک کشاورز) دارد، When روی "نهایی کردن سفارش" کلیک کند، Then سیستم یک رکورد سفارش اصلی با وضعیت "در حال پردازش" (Processing) ایجاد کرده و مقدار رزرو شده از موجودی هر محصول کسر (یا به طور موقت رزرو) شود.

### سناریوی چند کشاورزی (تجمیع سفارش):
[ ] Given سبد خرید شامل اقلامی از کشاورز A و کشاورز B است، When سفارش نهایی می‌شود، Then سیستم باید سفارشات فرعی مجزا (یا حداقل اعلان‌های مجزا) برای هر کشاورز تولید کند که شامل اقلام مربوط به خودشان باشد.

### سناریوی هدایت به پرداخت:
[ ] Given سفارش با موفقیت نهایی شد، When خریدار مرحله نهایی‌سازی را کامل می‌کند، Then باید به صفحه "درگاه پرداخت امن" هدایت شود و مبلغ کل سفارش به درگاه ارسال گردد.

### نقش: کشاورز
داستان: به عنوان کشاورز، می‌خواهم تمام سفارشات دریافتی خود را ببینم و وضعیت آن‌ها را (مانند بسته‌بندی شده، ارسال شده) به‌روز کنم، تا بتوانم جریان کاری تکمیل سفارشاتم را به طور مؤثر مدیریت کنم.

### معیارهای پذیرش :

سناریوی مشاهده سفارشات ورودی:
[ ] Given کشاورزی سفارشاتی با وضعیت "در حال پردازش" از خریداران مختلف دارد، When کشاورز صفحه مدیریت سفارشات خود را مشاهده کند، Then باید جزئیات خریدار، اقلام سفارش داده شده (با کمترین جزئیات مورد نیاز برای آماده‌سازی) و وضعیت فعلی هر سفارش را ببیند.

### سناریوی به‌روزرسانی به "بسته‌بندی شده":
[ ] Given کشاورز کالاها را برای یک سفارش (مثلاً سفارش #456) بسته‌بندی کرده است، When وضعیت سفارش 456 را از "در حال پردازش" به "بسته‌بندی شده" (Packed) تغییر دهد، Then سیستم باید خریدار مربوطه را از طریق اعلان یا ایمیل مطلع کند که سفارش آماده تحویل است.

### سناریوی ثبت کد رهگیری:
[ ] Given کشاورز کالاها را به پیک تحویل داده است، When وضعیت را به "ارسال شده" (Shipped) به‌روز کند و یک کد رهگیری (Tracking ID) وارد نماید، Then سیستم باید کد رهگیری را ثبت کرده و نمای رهگیری خریدار را با اطلاعات به‌روزرسانی کند.

### نقش: خریدار
داستان: به عنوان خریدار، می‌خواهم پرداخت سفارش نهایی شده خود را به صورت امن تکمیل کنم، تا تراکنش با موفقیت تأیید شده و فرآیند تکمیل سفارش آغاز شود.

### معیارهای پذیرش :

### سناریوی پرداخت موفق:
[ ] Given خریدار در صفحه پرداخت با مبلغ کل (T_{total}) معتبر قرار دارد (وضعیت سفارش "Processing")، When تراکنش را از طریق درگاه پرداخت یکپارچه با موفقیت انجام دهد، Then وضعیت سفارش باید به "پرداخت تأیید شد" (Payment Confirmed) به‌روز شود و موجودی قطعی از انبار کشاورز کسر گردد.

سناریوی پرداخت ناموفق (خطای سیستم بانکی):
[ ] Given خریدار تلاش می‌کند پرداخت کند، When درگاه پرداخت به دلیل خطای سیستمی یا عدم موجودی، خطا برگرداند، Then وضعیت سفارش باید به "پرداخت ناموفق" (Payment Failed) بازگردد، و موجودی رزرو شده باید آزاد شود؛ خریدار باید بتواند مجدداً تلاش کند.

سناریوی صدور رسید:
[ ] Given پرداخت سفارش تأیید شد، When سیستم موفقیت نهایی تراکنش را دریافت کند، Then یک رسید دیجیتال شامل شناسه تراکنش، مبلغ و تاریخ، تولید شده و به آدرس ایمیل ثبت‌شده خریدار ارسال می‌شود.

### نقش: کشاورز
داستان: به عنوان کشاورز، می‌خواهم گزارش‌های فروش سفارشی برای دوره‌های زمانی مشخص (هفتگی/ماهانه) تولید کنم، تا بتوانم عملکردم را تحلیل کرده و برداشت‌های آتی را برنامه‌ریزی کنم.

### معیارهای پذیرش :

### Sسناریوی تولید گزارش ماهانه پیش‌فرض:
[ ] Given سوابق فروش تکمیل شده‌ای برای کشاورز در سه ماه گذشته وجود دارد، When او گزینه "گزارش ماهانه" را برای ماه گذشته (مثلاً جولای) انتخاب کند، Then سیستم گزارشی تولید کند که شامل پارامترهای زیر باشد: درآمد کل فروش در جولای، کل واحدهای فروخته شده و سه محصول پرفروش (بر اساس حجم فروش) در آن ماه.

### سناریوی گزارش‌گیری بر اساس بازه زمانی سفارشی:
[ ] Given کشاورز در پنل گزارش‌گیری است، When او یک بازه زمانی سفارشی (مثلاً از تاریخ (D_1 = 2024-10-01) تا (D_2 = 2024-10-15)) را انتخاب و گزارش را تولید کند، Then سیستم باید فقط سفارش‌هایی را شامل شود که وضعیت نهایی آن‌ها (Payment Confirmed) در بازه ([D_1, D_2]) ثبت شده باشد.

### سناریوی خروجی گرفتن داده‌ها:
[ ] Given یک گزارش فروش بر اساس معیارهای بالا تولید شده است، When کشاورز گزینه 'Export to CSV' را انتخاب کند، Then سیستم باید تمامی داده‌های جدولی گزارش (شامل تاریخ، محصول، مقدار، قیمت نهایی) را در قالب استاندارد CSV آماده دانلود کند.

پایان مستند.